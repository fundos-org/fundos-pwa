{"ast":null,"code":"import React,{useState}from'react';import ResponsiveLayout,{MobileContainer,Card,FormInput,Button}from'../../components/ResponsiveLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PhoneNumberEntry=_ref=>{let{showNotification}=_ref;const[phoneNumber,setPhoneNumber]=useState('');const[invitationCode,setInvitationCode]=useState('');const handleSubmit=async e=>{e.preventDefault();if(phoneNumber.length!==10){showNotification('Please enter a valid 10-digit phone number','error');return;}try{const response=await fetch(\"https://api.fundos.services/api/v0/test/user/phone/otp/send?phone_number=\".concat(phoneNumber,\"&invite_code=\").concat(invitationCode));const data=await response.json();if(data.success){localStorage.setItem('phoneNumber',phoneNumber);localStorage.setItem('invitationCode',invitationCode);if(data.user_id){localStorage.setItem('userId',data.user_id);}window.history.pushState({},'','/verify-phone-otp');window.location.reload();}else{showNotification(data.message||'Failed to send OTP. Please try again.','error');}}catch(error){console.error('Error:',error);showNotification('Failed to send OTP. Please check your internet connection.','error');}};const handlePhoneNumberChange=e=>{const value=e.target.value.replace(/\\D/g,'');if(value.length<=10){setPhoneNumber(value);}};return/*#__PURE__*/_jsx(ResponsiveLayout,{fullHeight:true,padding:\"none\",backgroundType:\"solid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"full-width-mobile flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsx(MobileContainer,{maxWidth:\"full\",className:\"w-full px-4 py-8\",children:/*#__PURE__*/_jsxs(Card,{className:\"mx-auto max-w-md\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-responsive-xl font-bold mb-4 text-gray-900\",children:\"Enter phone number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 mb-6 sm:mb-8 text-sm sm:text-base leading-relaxed\",children:\"Your number helps us verify your identity and keep your account secure.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Phone Number\",type:\"tel\",value:phoneNumber,onChange:handlePhoneNumberChange,placeholder:\"Enter 10-digit number\",required:true,leftIcon:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 text-sm font-medium\",children:\"+91\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-4 bg-gray-300 mx-2\"})]})}),/*#__PURE__*/_jsx(FormInput,{label:\"Invitation Code (Optional)\",type:\"text\",value:invitationCode,onChange:e=>setInvitationCode(e.target.value),placeholder:\"Enter invitation code\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"accent\",size:\"lg\",fullWidth:true,children:\"Send OTP\"})]})]})})})});};export default PhoneNumberEntry;","map":{"version":3,"names":["React","useState","ResponsiveLayout","MobileContainer","Card","FormInput","Button","jsx","_jsx","jsxs","_jsxs","PhoneNumberEntry","_ref","showNotification","phoneNumber","setPhoneNumber","invitationCode","setInvitationCode","handleSubmit","e","preventDefault","length","response","fetch","concat","data","json","success","localStorage","setItem","user_id","window","history","pushState","location","reload","message","error","console","handlePhoneNumberChange","value","target","replace","fullHeight","padding","backgroundType","children","className","maxWidth","onSubmit","label","type","onChange","placeholder","required","leftIcon","variant","size","fullWidth"],"sources":["/home/manish/Downloads/fundos-android/live_fund_os_pwa/fundos-pwa/src/pages/auth/PhoneNumberEntry.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ResponsiveLayout, { MobileContainer, Card, FormInput, Button } from '../../components/ResponsiveLayout';\n\ninterface PageProps {\n  showNotification: (message: string, type?: 'success' | 'error' | 'info') => void;\n}\n\nconst PhoneNumberEntry: React.FC<PageProps> = ({ showNotification }) => {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [invitationCode, setInvitationCode] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (phoneNumber.length !== 10) {\n      showNotification('Please enter a valid 10-digit phone number', 'error');\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        `https://api.fundos.services/api/v0/test/user/phone/otp/send?phone_number=${phoneNumber}&invite_code=${invitationCode}`\n      );\n      const data = await response.json();\n      \n      if (data.success) {\n        localStorage.setItem('phoneNumber', phoneNumber);\n        localStorage.setItem('invitationCode', invitationCode);\n        if (data.user_id) {\n          localStorage.setItem('userId', data.user_id);\n        }\n        window.history.pushState({}, '', '/verify-phone-otp');\n        window.location.reload();\n      } else {\n        showNotification(data.message || 'Failed to send OTP. Please try again.', 'error');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      showNotification('Failed to send OTP. Please check your internet connection.', 'error');\n    }\n  };\n\n  const handlePhoneNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, '');\n    if (value.length <= 10) {\n      setPhoneNumber(value);\n    }\n  };\n\n  return (\n    <ResponsiveLayout fullHeight padding=\"none\" backgroundType=\"solid\">\n      <div className=\"full-width-mobile flex items-center justify-center bg-gray-50\">\n        <MobileContainer maxWidth=\"full\" className=\"w-full px-4 py-8\">\n          <Card className=\"mx-auto max-w-md\">\n            <h1 className=\"text-responsive-xl font-bold mb-4 text-gray-900\">\n              Enter phone number\n            </h1>\n            \n            <p className=\"text-green-600 mb-6 sm:mb-8 text-sm sm:text-base leading-relaxed\">\n              Your number helps us verify your identity and keep your account secure.\n            </p>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Phone Number Input */}\n              <div className=\"space-y-4\">\n                <FormInput\n                  label=\"Phone Number\"\n                  type=\"tel\"\n                  value={phoneNumber}\n                  onChange={handlePhoneNumberChange}\n                  placeholder=\"Enter 10-digit number\"\n                  required\n                  leftIcon={\n                    <div className=\"flex items-center\">\n                      <span className=\"text-gray-700 text-sm font-medium\">+91</span>\n                      <div className=\"w-px h-4 bg-gray-300 mx-2\" />\n                    </div>\n                  }\n                />\n                \n                <FormInput\n                  label=\"Invitation Code (Optional)\"\n                  type=\"text\"\n                  value={invitationCode}\n                  onChange={(e) => setInvitationCode(e.target.value)}\n                  placeholder=\"Enter invitation code\"\n                />\n              </div>\n              \n              <Button\n                type=\"submit\"\n                variant=\"accent\"\n                size=\"lg\"\n                fullWidth\n              >\n                Send OTP\n              </Button>\n            </form>\n          </Card>\n        </MobileContainer>\n      </div>\n    </ResponsiveLayout>\n  );\n};\n\nexport default PhoneNumberEntry; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,gBAAgB,EAAIC,eAAe,CAAEC,IAAI,CAAEC,SAAS,CAAEC,MAAM,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAM/G,KAAM,CAAAC,gBAAqC,CAAGC,IAAA,EAA0B,IAAzB,CAAEC,gBAAiB,CAAC,CAAAD,IAAA,CACjE,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACe,cAAc,CAAEC,iBAAiB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAExD,KAAM,CAAAiB,YAAY,CAAG,KAAO,CAAAC,CAAkB,EAAK,CACjDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAIN,WAAW,CAACO,MAAM,GAAK,EAAE,CAAE,CAC7BR,gBAAgB,CAAC,4CAA4C,CAAE,OAAO,CAAC,CACvE,OACF,CAEA,GAAI,CACF,KAAM,CAAAS,QAAQ,CAAG,KAAM,CAAAC,KAAK,6EAAAC,MAAA,CACkDV,WAAW,kBAAAU,MAAA,CAAgBR,cAAc,CACvH,CAAC,CACD,KAAM,CAAAS,IAAI,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACE,OAAO,CAAE,CAChBC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEf,WAAW,CAAC,CAChDc,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAEb,cAAc,CAAC,CACtD,GAAIS,IAAI,CAACK,OAAO,CAAE,CAChBF,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAEJ,IAAI,CAACK,OAAO,CAAC,CAC9C,CACAC,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,CAAE,EAAE,CAAE,mBAAmB,CAAC,CACrDF,MAAM,CAACG,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,IAAM,CACLtB,gBAAgB,CAACY,IAAI,CAACW,OAAO,EAAI,uCAAuC,CAAE,OAAO,CAAC,CACpF,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAC9BxB,gBAAgB,CAAC,4DAA4D,CAAE,OAAO,CAAC,CACzF,CACF,CAAC,CAED,KAAM,CAAA0B,uBAAuB,CAAIpB,CAAsC,EAAK,CAC1E,KAAM,CAAAqB,KAAK,CAAGrB,CAAC,CAACsB,MAAM,CAACD,KAAK,CAACE,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAC/C,GAAIF,KAAK,CAACnB,MAAM,EAAI,EAAE,CAAE,CACtBN,cAAc,CAACyB,KAAK,CAAC,CACvB,CACF,CAAC,CAED,mBACEhC,IAAA,CAACN,gBAAgB,EAACyC,UAAU,MAACC,OAAO,CAAC,MAAM,CAACC,cAAc,CAAC,OAAO,CAAAC,QAAA,cAChEtC,IAAA,QAAKuC,SAAS,CAAC,+DAA+D,CAAAD,QAAA,cAC5EtC,IAAA,CAACL,eAAe,EAAC6C,QAAQ,CAAC,MAAM,CAACD,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC3DpC,KAAA,CAACN,IAAI,EAAC2C,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAChCtC,IAAA,OAAIuC,SAAS,CAAC,iDAAiD,CAAAD,QAAA,CAAC,oBAEhE,CAAI,CAAC,cAELtC,IAAA,MAAGuC,SAAS,CAAC,kEAAkE,CAAAD,QAAA,CAAC,yEAEhF,CAAG,CAAC,cAEJpC,KAAA,SAAMuC,QAAQ,CAAE/B,YAAa,CAAC6B,SAAS,CAAC,WAAW,CAAAD,QAAA,eAEjDpC,KAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBtC,IAAA,CAACH,SAAS,EACR6C,KAAK,CAAC,cAAc,CACpBC,IAAI,CAAC,KAAK,CACVX,KAAK,CAAE1B,WAAY,CACnBsC,QAAQ,CAAEb,uBAAwB,CAClCc,WAAW,CAAC,uBAAuB,CACnCC,QAAQ,MACRC,QAAQ,cACN7C,KAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCtC,IAAA,SAAMuC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CAAC,KAAG,CAAM,CAAC,cAC9DtC,IAAA,QAAKuC,SAAS,CAAC,2BAA2B,CAAE,CAAC,EAC1C,CACN,CACF,CAAC,cAEFvC,IAAA,CAACH,SAAS,EACR6C,KAAK,CAAC,4BAA4B,CAClCC,IAAI,CAAC,MAAM,CACXX,KAAK,CAAExB,cAAe,CACtBoC,QAAQ,CAAGjC,CAAC,EAAKF,iBAAiB,CAACE,CAAC,CAACsB,MAAM,CAACD,KAAK,CAAE,CACnDa,WAAW,CAAC,uBAAuB,CACpC,CAAC,EACC,CAAC,cAEN7C,IAAA,CAACF,MAAM,EACL6C,IAAI,CAAC,QAAQ,CACbK,OAAO,CAAC,QAAQ,CAChBC,IAAI,CAAC,IAAI,CACTC,SAAS,MAAAZ,QAAA,CACV,UAED,CAAQ,CAAC,EACL,CAAC,EACH,CAAC,CACQ,CAAC,CACf,CAAC,CACU,CAAC,CAEvB,CAAC,CAED,cAAe,CAAAnC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}