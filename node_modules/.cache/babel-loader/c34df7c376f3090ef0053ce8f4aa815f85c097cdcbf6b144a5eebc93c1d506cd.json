{"ast":null,"code":"import React,{useState}from'react';import ResponsiveLayout,{MobileContainer,BackButton,Card,FormInput,Button}from'../../components/ResponsiveLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PhoneNumberEntry=_ref=>{let{showNotification}=_ref;const[phoneNumber,setPhoneNumber]=useState('');const[invitationCode,setInvitationCode]=useState('');const handleSubmit=async e=>{e.preventDefault();if(phoneNumber.length!==10){showNotification('Please enter a valid 10-digit phone number','error');return;}try{const response=await fetch(\"https://api.fundos.services/api/v0/test/user/phone/otp/send?phone_number=\".concat(phoneNumber,\"&invite_code=\").concat(invitationCode));const data=await response.json();if(data.success){localStorage.setItem('phoneNumber',phoneNumber);localStorage.setItem('invitationCode',invitationCode);if(data.user_id){localStorage.setItem('userId',data.user_id);}window.history.pushState({},'','/verify-phone-otp');window.location.reload();}else{showNotification(data.message||'Failed to send OTP. Please try again.','error');}}catch(error){console.error('Error:',error);showNotification('Failed to send OTP. Please check your internet connection.','error');}};const handleBack=()=>{window.history.pushState({},'','/get-started');window.location.reload();};const handlePhoneNumberChange=e=>{const value=e.target.value.replace(/\\D/g,'');if(value.length<=10){setPhoneNumber(value);}};return/*#__PURE__*/_jsx(ResponsiveLayout,{centered:true,fullHeight:true,backgroundType:\"gradient\",children:/*#__PURE__*/_jsxs(MobileContainer,{maxWidth:\"md\",children:[/*#__PURE__*/_jsx(BackButton,{onClick:handleBack}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-responsive-xl font-bold mb-4\",children:\"Enter phone number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-accent mb-6 sm:mb-8 text-sm sm:text-base leading-relaxed\",children:\"Your number helps us verify your identity and keep your account secure.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Phone Number\",type:\"tel\",value:phoneNumber,onChange:handlePhoneNumberChange,placeholder:\"Enter 10-digit number\",required:true,leftIcon:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-medium\",children:\"+91\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-4 bg-gray-600 mx-2\"})]})}),/*#__PURE__*/_jsx(FormInput,{label:\"Invitation Code (Optional)\",type:\"text\",value:invitationCode,onChange:e=>setInvitationCode(e.target.value),placeholder:\"Enter invitation code\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",size:\"lg\",fullWidth:true,children:\"Send OTP\"})]})]})]})});};export default PhoneNumberEntry;","map":{"version":3,"names":["React","useState","ResponsiveLayout","MobileContainer","BackButton","Card","FormInput","Button","jsx","_jsx","jsxs","_jsxs","PhoneNumberEntry","_ref","showNotification","phoneNumber","setPhoneNumber","invitationCode","setInvitationCode","handleSubmit","e","preventDefault","length","response","fetch","concat","data","json","success","localStorage","setItem","user_id","window","history","pushState","location","reload","message","error","console","handleBack","handlePhoneNumberChange","value","target","replace","centered","fullHeight","backgroundType","children","maxWidth","onClick","className","onSubmit","label","type","onChange","placeholder","required","leftIcon","variant","size","fullWidth"],"sources":["/home/manish/Downloads/fundos-android/live_fund_os_pwa/fundos-pwa/src/pages/auth/PhoneNumberEntry.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ResponsiveLayout, { MobileContainer, BackButton, Card, FormInput, Button } from '../../components/ResponsiveLayout';\n\ninterface PageProps {\n  showNotification: (message: string, type?: 'success' | 'error' | 'info') => void;\n}\n\nconst PhoneNumberEntry: React.FC<PageProps> = ({ showNotification }) => {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [invitationCode, setInvitationCode] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (phoneNumber.length !== 10) {\n      showNotification('Please enter a valid 10-digit phone number', 'error');\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        `https://api.fundos.services/api/v0/test/user/phone/otp/send?phone_number=${phoneNumber}&invite_code=${invitationCode}`\n      );\n      const data = await response.json();\n      \n      if (data.success) {\n        localStorage.setItem('phoneNumber', phoneNumber);\n        localStorage.setItem('invitationCode', invitationCode);\n        if (data.user_id) {\n          localStorage.setItem('userId', data.user_id);\n        }\n        window.history.pushState({}, '', '/verify-phone-otp');\n        window.location.reload();\n      } else {\n        showNotification(data.message || 'Failed to send OTP. Please try again.', 'error');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      showNotification('Failed to send OTP. Please check your internet connection.', 'error');\n    }\n  };\n\n  const handleBack = () => {\n    window.history.pushState({}, '', '/get-started');\n    window.location.reload();\n  };\n\n  const handlePhoneNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, '');\n    if (value.length <= 10) {\n      setPhoneNumber(value);\n    }\n  };\n\n  return (\n    <ResponsiveLayout centered fullHeight backgroundType=\"gradient\">\n      <MobileContainer maxWidth=\"md\">\n        <BackButton onClick={handleBack} />\n        \n        <Card>\n          <h1 className=\"text-responsive-xl font-bold mb-4\">\n            Enter phone number\n          </h1>\n          \n          <p className=\"text-accent mb-6 sm:mb-8 text-sm sm:text-base leading-relaxed\">\n            Your number helps us verify your identity and keep your account secure.\n          </p>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Phone Number Input */}\n            <div className=\"space-y-4\">\n              <FormInput\n                label=\"Phone Number\"\n                type=\"tel\"\n                value={phoneNumber}\n                onChange={handlePhoneNumberChange}\n                placeholder=\"Enter 10-digit number\"\n                required\n                leftIcon={\n                  <div className=\"flex items-center\">\n                    <span className=\"text-white text-sm font-medium\">+91</span>\n                    <div className=\"w-px h-4 bg-gray-600 mx-2\" />\n                  </div>\n                }\n              />\n              \n              <FormInput\n                label=\"Invitation Code (Optional)\"\n                type=\"text\"\n                value={invitationCode}\n                onChange={(e) => setInvitationCode(e.target.value)}\n                placeholder=\"Enter invitation code\"\n              />\n            </div>\n            \n            <Button\n              type=\"submit\"\n              variant=\"primary\"\n              size=\"lg\"\n              fullWidth\n            >\n              Send OTP\n            </Button>\n          </form>\n        </Card>\n      </MobileContainer>\n    </ResponsiveLayout>\n  );\n};\n\nexport default PhoneNumberEntry; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}